<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management System</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* Styles similar to your original code, no major changes here */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background: #1E2A38; color: white; display: flex; height: 100vh; justify-content: center; align-items: center; padding: 20px; }
        .dashboard-container { width: 100%; max-width: 900px; background: #273747; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); }
        .btn { width: 100%; padding: 12px; background: #FFD700; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; transition: 0.3s ease; margin: 10px 0; }
        .btn:hover { background: #FFC107; transform: scale(1.05); }
        input[type="text"], input[type="search"] {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
            background: #f4f4f4;
            font-size: 14px;
        }
        .employee-card {
            background: #3C4A64;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: 0.3s;
        }
        .employee-card:hover { transform: translateY(-5px); }
        .employee-info {
            display: flex;
            align-items: center;
        }
        .employee-info img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
        }
        .employee-info div {
            color: white;
        }
        .employee-info .name {
            font-size: 16px;
            font-weight: bold;
        }
        .employee-info .position {
            font-size: 14px;
            color: #ddd;
        }
        .actions {
            display: flex;
            gap: 10px;
        }
        .actions button {
            padding: 8px 12px;
            background: #dc3545;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            transition: 0.3s;
        }
        .actions button:hover { background: #c82333; }
    </style>
</head>
<body>

    <div class="dashboard-container" id="dashboardPage" style="display:none;">
        <h2>Employee Management</h2>
        <div class="form-group">
            <button class="btn" onclick="showSection('addEmployee')">Add Employee</button>
            <button class="btn" onclick="showSection('viewEmployees')">View Employees</button>
            <button class="btn" onclick="downloadCSV()">Download CSV</button>
            <button class="btn" style="background: red;" onclick="logout()">Logout</button>
        </div>

        <!-- Add Employee Form -->
        <div id="addEmployee" style="display: none;">
            <h3>Add New Employee</h3>
            <input type="text" id="empName" placeholder="Employee Name">
            <input type="text" id="empNumber" placeholder="Employee Number">
            <input type="text" id="empQid" placeholder="Employee QID">
            <input type="text" id="empPhone" placeholder="Employee Phone">
            <input type="text" id="empPosition" placeholder="Employee Position">
            <input type="text" id="empRoom" placeholder="Employee Room">
            <input type="file" id="empPhoto">
            <button class="btn" onclick="addEmployee()">Add Employee</button>
        </div>

        <!-- View Employees Section -->
        <div id="viewEmployees" style="display: none;">
            <h3>Employee List</h3>
            <input type="text" id="searchInput" placeholder="Search Employee..." onkeyup="searchEmployee()">
            <div id="employeeList" class="employee-list"></div>
        </div>
    </div>

    <!-- LOGIN PAGE -->
    <div class="login-container" id="loginPage">
        <h2>Login</h2>
        <input type="text" id="username" placeholder="Username">
        <input type="password" id="password" placeholder="Password">
        <button class="btn" onclick="login()">Login</button>
    </div>
    <style>
      /* Other styles remain the same */
  
      /* Specific styles for the login input fields */
      .login-container input[type="text"], 
      .login-container input[type="password"] {
          width: 100%;  /* Ensure both input fields span the entire width */
          padding: 12px;
          margin: 8px 0;
          border-radius: 5px;
          border: 1px solid #ccc;
          background: #f4f4f4;
          font-size: 14px;
      }
  </style>
  
    <script>
        let employees = [];

        // Check if logged in already (on page load)
        if (localStorage.getItem("loggedIn") === "true") {
            showDashboard();
        }

        // Show Dashboard
        function showDashboard() {
            document.getElementById('loginPage').style.display = "none";
            document.getElementById('dashboardPage').style.display = "block";
        }

        // Login function
        function login() {
            if (document.getElementById('username').value === "admin" && document.getElementById('password').value === "12345") {
                localStorage.setItem("loggedIn", "true");
                showDashboard();
            } else {
                alert("Invalid Credentials!");
            }
        }

        // Logout function
        function logout() {
            localStorage.removeItem("loggedIn");
            document.getElementById('loginPage').style.display = "block";
            document.getElementById('dashboardPage').style.display = "none";
        }

        // Show Add Employee or View Employees Section
        function showSection(section) {
            document.getElementById('addEmployee').style.display = section === 'addEmployee' ? 'block' : 'none';
            document.getElementById('viewEmployees').style.display = section === 'viewEmployees' ? 'block' : 'none';
            if (section === 'viewEmployees') displayEmployees();
        }

        // Add Employee function
        function addEmployee() {
            const photoInput = document.getElementById('empPhoto').files[0];
            if (!photoInput) {
                alert("Please upload a photo!");
                return;
            }

            const reader = new FileReader();
            reader.onload = function (e) {
                employees.push({
                    photo: e.target.result,
                    name: document.getElementById('empName').value,
                    number: document.getElementById('empNumber').value,
                    qid: document.getElementById('empQid').value,
                    phone: document.getElementById('empPhone').value,
                    position: document.getElementById('empPosition').value,
                    room: document.getElementById('empRoom').value
                });
                displayEmployees();
            };
            reader.readAsDataURL(photoInput);
        }

        // Display Employees
        function displayEmployees() {
            const list = document.getElementById('employeeList');
            list.innerHTML = ''; // Clear previous list
            employees.forEach((emp, index) => {
                const card = document.createElement('div');
                card.className = 'employee-card';

                card.innerHTML = `
                    <div class="employee-info">
                        <img src="${emp.photo}" alt="Employee Photo">
                        <div>
                            <div class="name">${emp.name}</div>
                            <div class="position">${emp.position}</div>
                        </div>
                    </div>
                    <div class="actions">
                        <button onclick="deleteEmployee(${index})"><i class="fas fa-trash"></i> Delete</button>
                    </div>
                `;
                list.appendChild(card);
            });
        }

        // Delete Employee
        function deleteEmployee(index) {
            employees.splice(index, 1);
            displayEmployees();
        }

        // Search Employee
        function searchEmployee() {
            const searchValue = document.getElementById('searchInput').value.toLowerCase();
            const filteredEmployees = employees.filter(emp =>
                emp.name.toLowerCase().includes(searchValue) ||
                emp.number.toLowerCase().includes(searchValue) ||
                emp.phone.toLowerCase().includes(searchValue)
            );
            displayFilteredEmployees(filteredEmployees);
        }

        // Display filtered employees based on search
        function displayFilteredEmployees(filteredEmployees) {
            const list = document.getElementById('employeeList');
            list.innerHTML = ''; // Clear existing list
            filteredEmployees.forEach((emp, index) => {
                const card = document.createElement('div');
                card.className = 'employee-card';

                card.innerHTML = `
                    <div class="employee-info">
                        <img src="${emp.photo}" alt="Employee Photo">
                        <div>
                            <div class="name">${emp.name}</div>
                            <div class="position">${emp.position}</div>
                        </div>
                    </div>
                    <div class="actions">
                        <button onclick="deleteEmployee(${index})"><i class="fas fa-trash"></i> Delete</button>
                    </div>
                `;
                list.appendChild(card);
            });
        }

        // Download employee data as CSV
        function downloadCSV() {
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Name,Number,QID,Phone,Position,Room\n";

            employees.forEach(emp => {
                csvContent += `${emp.name},${emp.number},${emp.qid},${emp.phone},${emp.position},${emp.room}\n`;
            });

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "employees.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

    </script>

</body>
</html>
